
@{
    ViewBag.Title = "CourseDetail";
    Layout = "~/Views/Shared/_DefaultLayout.cshtml";
}
<script src="~/Scripts/jquery-3.4.1.js"></script>   
<div class="inner-banner" style="margin-top: 100px !important;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="instructor-wrap border-bottom-0 m-0">
                    <div class="about-instructor align-items-center">
                        <div class="abt-instructor-img">
                            <a href="instructor-profile.html"><img src="~/content/images/InstructorProfile/@Model.Tables[0].Rows[0]["profile_pic"]" alt="img" class="img-fluid"></a>
                        </div>
                        <div class="instructor-detail me-3">
                            <h5><a href="#">@Model.Tables[0].Rows[0]["Name"]</a></h5>
                            <p>UX/UI Designer</p>
                        </div>
                        <div class="rating mb-0">
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star"></i>
                            <span class="d-inline-block average-rating"><span>4.5</span> (15)</span>
                        </div>
                    </div>
                    <span class="web-badge mb-3">@Model.Tables[0].Rows[0]["cat_name"]</span>
                </div>
                <h2>@Model.Tables[0].Rows[0]["course_title"]</h2>
                <p></p>
                <div class="course-info d-flex align-items-center border-bottom-0 m-0 p-0">
                    <div class="cou-info">
                        <img src="/content/assets/img/icon/icon-01.svg" alt>
                        <p>12+ Lesson</p>
                    </div>
                    <div class="cou-info">
                        <img src="/content/assets/img/icon/timer-icon.svg" alt>
                        <p>9hr 30min</p>
                    </div>
                    <div class="cou-info">
                        <img src="/content/assets/img/icon/people.svg" alt>
                        <p>32 students enrolled</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<section class="page-content course-sec">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">

                <div class="card overview-sec">
                    <div class="card-body">
                        <h5 class="subs-title">Overview</h5>
                        <h6>Course Description</h6>
                        <p>@Html.Raw(Model.Tables[0].Rows[0]["course_disc"])</p>
                        <h6>What you'll learn</h6>
                       
                        <h6>Requirements</h6>
                        <ul class="mb-0">
                            @{
                                string req = Model.Tables[0].Rows[0]["course_req"];
                                string[] word = req.Split(',');
                                foreach (string words in word)
                                {
                                    <li>@words</li>
                                }
                            }

                        </ul>
                    </div>
                </div>


                <div class="card content-sec">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-6">
                                <h5 class="subs-title">Course Content</h5>
                            </div>
                            <div class="col-sm-6 text-sm-end">
                                <h6>92 Lectures 10:56:11</h6>
                            </div>
                        </div>
                        @if (Model != null)
                        {
                            int collapseid = 1;
                            foreach (System.Data.DataRow row in Model.Tables[1].Rows)
                            {
                                <div class="course-card">
                                    <h6 class="cou-title">
                                        <a class="collapsed handleChpter" id="section_@row["section_id"]" data-bs-toggle="collapse" href="#collapse_@collapseid" aria-expanded="false">@row["section_name"]</a>
                                    </h6>
                                    <div id="collapse_@collapseid" class="card-collapse collapse" style>
                                        <ul id="chapter_@row["section_id"]">
                                        </ul>
                                    </div>
                                </div>

                                collapseid++;
                            }
                        }
                    </div>
                </div>


                <div class="card instructor-sec">
                    <div class="card-body">
                        <h5 class="subs-title">About the instructor</h5>
                        <div class="instructor-wrap">
                            <div class="about-instructor">
                                <div class="abt-instructor-img">
                                    <a href="instructor-profile.html"><img src="~/content/images/InstructorProfile/@Model.Tables[0].Rows[0]["profile_pic"]" alt="img" class="img-fluid"></a>
                                </div>
                                <div class="instructor-detail">
                                    <h5><a href="instructor-profile.html">@Model.Tables[0].Rows[0]["Name"]</a></h5>
                                    <p>UX/UI Designer</p>
                                </div>
                            </div>
                            <div class="rating">
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star"></i>
                                <span class="d-inline-block average-rating">4.5 Instructor Rating</span>
                            </div>
                        </div>
                        <div class="course-info d-flex align-items-center">
                            <div class="cou-info">
                                <img src="/content/assets/img/icon/play.svg" alt>
                                <p>5 Courses</p>
                            </div>
                            <div class="cou-info">
                                <img src="/content/assets/img/icon/icon-01.svg" alt>
                                <p>12+ Lesson</p>
                            </div>
                            <div class="cou-info">
                                <img src="/content/assets/img/icon/icon-02.svg" alt>
                                <p>9hr 30min</p>
                            </div>
                            <div class="cou-info">
                                <img src="/content/assets/img/icon/people.svg" alt>
                                <p>270,866 students enrolled</p>
                            </div>
                        </div>
                        <p>UI/UX Designer, with 7+ Years Experience. Guarantee of High Quality Work.</p>
                        <p>Skills: Web Design, UI Design, UX/UI Design, Mobile Design, User Interface Design, Sketch, Photoshop, GUI, Html, Css, Grid Systems, Typography, Minimal, Template, English, Bootstrap, Responsive Web Design, Pixel Perfect, Graphic Design, Corporate, Creative, Flat, Luxury and much more.</p>
                        <p>Available for:</p>
                        <ul>
                            <li>1. Full Time Office Work</li>
                            <li>2. Remote Work</li>
                            <li>3. Freelance</li>
                            <li>4. Contract</li>
                            <li>5. Worldwide</li>
                        </ul>
                    </div>
                </div>


                <div class="card review-sec">
                    <div class="card-body">
                        <h5 class="subs-title">Reviews</h5>
                        <div class="instructor-wrap">
                            <div class="about-instructor">
                                <div class="abt-instructor-img">
                                    <a href="instructor-profile.html"><img src="/content/assets/img/user/user1.jpg" alt="img" class="img-fluid"></a>
                                </div>
                                <div class="instructor-detail">
                                    <h5><a href="instructor-profile.html">Nicole Brown</a></h5>
                                    <p>UX/UI Designer</p>
                                </div>
                            </div>
                            <div class="rating">
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star"></i>
                                <span class="d-inline-block average-rating">4.5 Instructor Rating</span>
                            </div>
                        </div>
                        <p class="rev-info">“ This is the second Photoshop course I have completed with Cristian. Worth every penny and recommend it highly. To get the most out of this course, its best to to take the Beginner to Advanced course first. The sound and video quality is of a good standard. Thank you Cristian. “</p>
                        <a href="javascript:;" class="btn btn-reply"><i class="feather-corner-up-left"></i> Reply</a>
                    </div>
                </div>


                <div class="card comment-sec">
                    <div class="card-body">
                        <h5 class="subs-title">Post A comment</h5>
                        <form>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control" placeholder="Full Name">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="email" class="form-control" placeholder="Email">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <input type="email" class="form-control" placeholder="Subject">
                            </div>
                            <div class="form-group">
<textarea rows="4" class="form-control" placeholder="Your Comments"></textarea>
                            </div>
                            <div class="submit-section">
                                <button class="btn submit-btn" type="submit">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
            <div class="col-lg-4">
                <div class="sidebar-sec">

                    <div class="video-sec vid-bg">
                        <div class="card">
                            <div class="card-body">
                                <a href="@Model.Tables[0].Rows[0]["videoUrl"]" class="video-thumbnail" data-fancybox>
                                    <div class="play-icon">
                                        <i class="fa-solid fa-play"></i>
                                    </div>
                                    <img  src="~/Content//images/courseImage/@Model.Tables[0].Rows[0]["course_cover_image"]" alt>
                                </a>
                                <div class="video-details">
                                    <div class="course-fee">
                                        @if (Model.Tables[2].Rows[0]["checkUser"] == 1)
                                        {
                                            <h2>Enrolled</h2>
                                        }
else
            {

                                            <h2>₹@Model.Tables[0].Rows[0]["course_price"]</h2>
            }
                                            <p><span>Rs. 99.00</span> 50% off</p>
                                        </div>
                                    <div class="row gx-2">
                                        <div class="col-md-6">
                                            <a href="course-wishlist.html" class="btn btn-wish w-100"><i class="feather-heart"></i> Add to Wishlist</a>
                                        </div>
                                        <div class="col-md-6">
                                            <a href="javascript:;" class="btn btn-wish w-100"><i class="feather-share-2"></i> Share</a>
                                        </div>
                                    </div>
                                    @if (Model.Tables[2].Rows[0]["checkUser"] == 1)
            {

                                    <a href="/home/Play_Course_Video?id=@Model.Tables[0].Rows[0][0]" class="btn btn-enroll w-100">Play Video</a>
            }else{
                                    <a href="/home/EnrollForCourse/@Model.Tables[0].Rows[0][0]" class="btn btn-enroll w-100">Enroll Now</a>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="card include-sec">
                        <div class="card-body">
                            <div class="cat-title">
                                <h4>Includes</h4>
                            </div>
                            <ul>
                                <li><img src="/content/assets/img/icon/import.svg" class="me-2" alt> 11 hours on-demand video</li>
                                <li><img src="/content/assets/img/icon/play.svg" class="me-2" alt> 69 downloadable resources</li>
                                <li><img src="/content/assets/img/icon/key.svg" class="me-2" alt> Full lifetime access</li>
                                <li><img src="/content/assets/img/icon/mobile.svg" class="me-2" alt> Access on mobile and TV</li>
                                <li><img src="/content/assets/img/icon/cloud.svg" class="me-2" alt> Assignments</li>
                                <li><img src="/content/assets/img/icon/teacher.svg" class="me-2" alt> Certificate of Completion</li>
                            </ul>
                        </div>
                    </div>


                    <div class="card feature-sec">
                        <div class="card-body">
                            <div class="cat-title">
                                <h4>Includes</h4>
                            </div>
                            <ul>
                                <li><img src="/content/assets/img/icon/users.svg" class="me-2" alt> Enrolled: <span>32 students</span></li>
                                <li><img src="/content/assets/img/icon/timer.svg" class="me-2" alt> Duration: <span>20 hours</span></li>
                                <li><img src="/content/assets/img/icon/chapter.svg" class="me-2" alt> Chapters: <span>15</span></li>
                                <li><img src="/content/assets/img/icon/video.svg" class="me-2" alt> Video:<span> 12 hours</span></li>
                                <li><img src="/content/assets/img/icon/chart.svg" class="me-2" alt> Level: <span>Beginner</span></li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>

<script>
    $(".handleChpter").click(function () {
        let id = this.id;
        let sectionId = id.split("section_");
        let courseid = @Request.QueryString["id"];
        $.ajax({
            url: "/home/ShowSelectedChapter",
            type: "get",
            data: { "courseId": courseid, "sectionId": sectionId[1] },
            success: function (res) {
                debugger;
                if (res.length > 0) {
                    for (var data of res) {
                        $(`#chapter_${sectionId[1]}`).html(
                            `
                            <li>
    <p><img src="/content/assets/img/icon/play.svg" alt class="me-2"> ${data.chap_name}</p>
    <div>
        <a href="#" onclick="handlePreview('${data.chap_video}')" data-bs-toggle="modal" data-bs-target="#exampleModal">Preview</a>
        <span>02:53</span>
    </div>
</li>
                            `
                        );
                    }
                }
            },
            error: function () {
                alert("Please try again");
            }
        });
    });

    function handlePreview(url) {
        $("#videoPreview").attr('src', url);
    }
</script>

<!-- Modal -->
<div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" onclick="$('#videoPreview').removeAttr('src');" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <iframe class="form-control" height="500" id="videoPreview" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="$('#videoPreview').removeAttr('src');" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
